// Define signals
define Signal Toggle: On = 1, Off = 0;
define Signal Celsius:  1..60;
define Signal Open:  0.0..100.0;
define Signal Percentage: 0.0..100.0;

// Define device types
define Device Bulb input: Toggle;
define Device Window input: Open;
// Define sensors
define Device MovementSensor output: Toggle & input: Celsius;
define Device Thermometer output: Celsius;
define Device LawnMower input: Toggle;

// Variable definitions of every device in the house
Bulb frontDoorLight = "129.6.18.1:12565";
Window bedRoomWindow = "129.67.198.65:12565";

LawnMower GardenMower = "129.10.10:10210";

MovementSensor frontDoorSensor = "Google.com";

int a = 5;
string aString = "Hej";
int testInt = 5;
float testFloat = 6.0;

init(){
    int man = 2;
    int jkl = 2 + a + get GardenMower Toggle + testFunctionInt("hej" + testFunction(5) + "i");
    jkl = 1;
    jkl = 2 + a + 2 + testInt;
    // Optional code for initialization
    // Automatically run when the program is run for the first time

    // Arguments can now be nested returning functions.
    string stringReturn = testFunction(testFunctionInt(testFunction(55)));
}

int testFunctionInt(string hej){
    return 5;
}

// Events
when frontDoorSensor Toggle: on {
    if(now > 17:00 && now < 21:00){
        set frontDoorLight Toggle: On;
    }
    wait 30 seconds;

    while(get frontDoorSensor Toggle == "On"){
        set frontDoorLight Toggle: Off;
    }
}

when mainThermometer Celsius: exceeds 22{
    setBedroomWindowsOpen(50.0); // Calling function defined further down
}

// Function
string testFunction(int percent){
    string test = " ";
    set bedRoomWindow Open: 15.0;
    while(true){
        return;
    }

    while(false){
        break;
    }

    return "hej";
}

// Function
void setBedroomWindowsOpen(float percent){
    set bedRoomWindow Open: percent;
}

// Repeating event
every 2 hours{
    int ab = a;
    float af = 1.2 + 2.5 + 3.5;
    b = 1.2 * 5.3 + 3.3;
    string c = "Magnus";
    string godPerson = "hey";

    if(a == 3){
        string mads = "hey";
    } else {
        string magnus = godPerson;
    }
}

// // Turn on lawn mower every 2 weeks at 11:00 every summer.
every 2 weeks starting 11:00 01d04m2019y{
    if(01d04m < now && now < 30d09m){
        set GardenMower Toggle: On;
    }

    int b = 3;
    if(5 == 5 && (b == a || a == b)){
        b = 5;
    }

    while(true){

    }
}

when mainThermometer Celsius: exceeds 22{
    setBedroomWindowsOpen(50.0); // Calling function defined further down
}

// Events
when frontDoorSensor Toggle: on {

}

when 14:00{

}

when 01d01m2000y{

}

when 01d01m{

}

when 14:00 01d01m2000y{

}

when 14:00 01d01m{

}

every 2 hours starting 14:00{

}

every 2 hours starting 01d01m2000y{

}

every 2 hours starting 01d01m{

}

every 2 hours starting 14:00 01d01m2000y{

}

every 2 hours starting 14:00 01d01m{

}

every 2 hours{
}

// Define signals
define Signal toggle: On = 1, Off = 0, on = "hej";
define Signal celsius:  1..60;
define Signal open:  0.0..100.0;

// Define device types
define Device Bulb input: toggle;
define Device Window input: open;
// Define sensors
define Device MovementSensor output: toggle & input: celsius;
define Device Thermometer output: celsius;

// Variable definitions of every device in the house
Bulb frontDoorLight = "129.6.18.1:12565";
Window bedRoomWindow = "129.67.198.65:12565";

MovementSensor frontDoorSensor = "Google.com";

Thermometer mainThermometer = "129.67.198.65:12565";

string aString = "Hej";
int testInt = 5;
float testFloat = 6.0;

init(){
    int a = 2.0;
    // Optional code for initialization
    // Automatically run when the program is run for the first time
}

// Events
when frontDoorSensor toggle: on {
    if(now > 17:00 && now < 21:00){
        set frontDoorLight toggle: on;
    }
    wait 30 seconds;

    while(get frontDoorSensor toggle == "on"){
        set frontDoorLight toggle: off;
    }

}

when mainThermometer celsius: exceeds 22{
    setBedroomWindowsOpen(50); // Calling function defined further down
}

// Function
string testFunction(int percentage){
    set bedRoomWindow open: percentage;

    while(true){
        return;
    }

    while(false){
        break;
    }

    return "hej";
}

// Function
string setBedroomWindowsOpenExtra(int percentage, float f, string s){
    set bedRoomWindow open: percentage;

    setBedroomWindowsOpen(1, 2.0, "hej");
    return;
}

// Function
void setBedroomWindowsOpen(int percentage){
    set bedRoomWindow openWindow: percentage;
}

// Repeating event
every 2 hours{
    int ab = a;
    ab = b;
    float af = 1.2;
    b = 1.2;
    string c = "Magnus";
    string godPerson = "hey";

    if(a == 3){
        string mads = "hey";
    } else {
        string magnus = godPerson;
    }
}

// // Turn on lawn mower every 2 weeks at 11:00 every summer.
every 2 weeks starting 11:00 01d04m2019y{
    if(01d04m < now && now < 30d09m){
        set GardenMower toggle: on;
    }

    if(5 == 5 && (b == a || a == b)){
    }

    while(true){

    }
}

when mainThermometer celsius: exceeds 22{
    setBedroomWindowsOpen(50); // Calling function defined further down
}

// Events
when frontDoorSensor toggle: on {

}

when 14:00{

}

when 01d01m2000y{

}

when 01d01m{

}

when 14:00 01d01m2000y{

}

when 14:00 01d01m{

}

every 2 hours starting 14:00{

}

every 2 hours starting 01d01m2000y{

}

every 2 hours starting 01d01m{

}

every 2 hours starting 14:00 01d01m2000y{

}

every 2 hours starting 14:00 01d01m{

}

every 2 hours{

}
